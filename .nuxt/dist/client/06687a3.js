(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{195:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return f}));var r=n(66),c=function(t){return Object(r.b)({url:"/api/articles",method:"get",params:t})},l=function(t){return Object(r.b)({url:"/api/articles/feed",method:"get",params:t})},o=function(t){return Object(r.b)({url:"/api/articles/".concat(t,"/favorite"),method:"post"})},v=function(t){return Object(r.b)({url:"/api/articles/".concat(t,"/favorite"),method:"delete"})},d=function(t){return Object(r.b)({url:"/api/articles/".concat(t),method:"get"})},f=function(t){return Object(r.b)({url:"/api/articles/".concat(t,"/comments"),method:"get"})}},265:function(t,e,n){"use strict";n.r(e);var r=n(10),c=n(4),l=(n(36),n(38),n(13),n(39),n(195)),o=n(66),v={name:"home",watchQuery:["page","tag","tab"],asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var n,c,v,d,f,m,_,h,C,data,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,c=t.store,v=n.tab||"g_feed",d=n.tag,f=parseInt(n.page||1),m=20,_=c.state.user&&"y_feed"===v?l.e:l.c,e.next=8,Promise.all([_({limit:m,tag:d,offset:m*(f-1)}),Object(o.b)({url:"/api/tags",method:"get"})]);case 8:return h=e.sent,C=Object(r.a)(h,2),data=C[0].data,k=C[1].data,data.articles.forEach((function(t){t.isBtn=!1})),e.abrupt("return",{articles:data.articles,articlesCount:data.articlesCount,page:f,limit:m,tags:k.tags,tab:v,tag:d});case 14:case"end":return e.stop()}}),e)})))()},computed:{totalPage:function(){return Math.ceil(this.articlesCount/this.limit)}},methods:{favorite:function(article){return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(article),article.isBtn=!0,!article.favorited){t.next=9;break}return t.next=5,Object(l.a)(article.slug);case 5:article.favorited=!1,article.favoritesCount-=1,t.next=13;break;case 9:return t.next=11,Object(l.f)(article.slug);case 11:article.favorited=!0,article.favoritesCount+=1;case 13:article.isBtn=!1;case 14:case"end":return t.stop()}}),t)})))()}}},d=n(30),component=Object(d.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-page"},[t._m(0),t._v(" "),n("div",{staticClass:"container page"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-9"},[n("div",{staticClass:"feed-toggle"},[n("ul",{staticClass:"nav nav-pills outline-active"},[n("li",{staticClass:"nav-item"},[n("nuxt-link",{staticClass:"nav-link",class:{active:"y_feed"===t.tab},attrs:{exact:"",to:{name:"home",query:{tab:"y_feed"}}}},[t._v("Your Feed")])],1),t._v(" "),n("li",{staticClass:"nav-item"},[n("nuxt-link",{staticClass:"nav-link",class:{active:"g_feed"===t.tab},attrs:{exact:"",to:{name:"home",query:{tab:"g_feed"}}}},[t._v("Global Feed")])],1),t._v(" "),"tag"===t.tab?n("li",{staticClass:"nav-item"},[n("nuxt-link",{staticClass:"nav-link",class:{active:"tag"===t.tab},attrs:{exact:"",to:{name:"home",query:{tab:"tag"}}}},[t._v("#"+t._s(t.tag))])],1):t._e()])]),t._v(" "),t._l(t.articles,(function(e){return n("div",{key:e.slug,staticClass:"article-preview"},[n("div",{staticClass:"article-meta"},[n("nuxt-link",{attrs:{to:{name:"profile",params:{username:e.author.username}}}},[n("img",{attrs:{src:e.author.image}})]),t._v(" "),n("div",{staticClass:"author"},[n("nuxt-link",{attrs:{to:{name:"profile",params:{username:e.author.username}}}},[t._v("\n                "+t._s(e.author.username)+"\n              ")]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t._f("time")(e.createdAt,"MMM DD,YYYY")))])],1),t._v(" "),n("button",{staticClass:"btn btn-outline-primary btn-sm pull-xs-right",class:{active:e.favorited},attrs:{disabled:e.isBtn},on:{click:function(n){return t.favorite(e)}}},[n("i",{staticClass:"ion-heart",class:{active:e.favorited}}),t._v(" "+t._s(e.favoritesCount)+"\n            ")])],1),t._v(" "),n("nuxt-link",{staticClass:"preview-link",attrs:{to:{name:"articleDetial",params:{slug:e.slug}}}},[n("h1",[t._v(t._s(e.title))]),t._v(" "),n("p",[t._v(t._s(e.description))]),t._v(" "),n("span",[t._v("Read more...")])])],1)})),t._v(" "),n("nav",[n("ul",{staticClass:"pagination"},t._l(t.totalPage,(function(e){return n("li",{key:e,staticClass:"page-item ",class:{active:t.page===e}},[n("nuxt-link",{staticClass:"page-link ng-binding",attrs:{to:{path:"/",query:{page:e,tag:t.tag,tab:t.tab}}}},[t._v(t._s(e))])],1)})),0)])],2),t._v(" "),n("div",{staticClass:"col-md-3"},[n("div",{staticClass:"sidebar"},[n("p",[t._v("Popular Tags")]),t._v(" "),n("div",{staticClass:"tag-list"},t._l(t.tags,(function(e,r){return n("nuxt-link",{key:r,staticClass:"tag-pill tag-default",attrs:{to:{name:"home",query:{tag:e,tab:"tag"}}}},[t._v(t._s(e))])})),1)])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"logo-font"},[t._v("conduit")]),t._v(" "),n("p",[t._v("A place to share your knowledge.")])])])}],!1,null,null,null);e.default=component.exports}}]);